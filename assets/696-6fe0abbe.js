"use strict";(self.webpackChunkwebpack_vue3=self.webpackChunkwebpack_vue3||[]).push([[696],{696:(e,t,l)=>{l.r(t),l.d(t,{default:()=>w});var a=l(5910),i=l(3295),u=l(7375),n=l(9152);const o={class:"virtual-list"},r={__name:"virtual-list",props:{data:{type:Array,default:()=>[]},height:{type:Number,default:void 0},maxHeight:{type:Number,default:void 0},minItemHeight:{type:Number,default:20},buffer:{type:Number,default:1},fixed:{type:Boolean,default:!0},showOverflowTooltip:{type:Boolean,default:!1}},setup(e){const t=e;let l=k(),r=l.length;const f=(0,u.iH)(t.height?null:t.maxHeight);let d=0,m=0,h=0;const s=(0,u.iH)([]);let c=0,g=0;const p=(0,u.iH)(0),v=(0,u.iH)(0);let b=0;const w=(0,u.iH)(null),_=(0,u.iH)(null);let x=[],H=!1;const y=(0,u.iH)(null);function k(){return t.data.map(((e,t)=>({id:`${Date.now()}-${t}`,data:e})))}function W(){s.value=l,p.value=0,v.value=0,b=0}function M(){if(m=function(){if(!t.height&&!t.maxHeight)return;let e=0;return e=t.fixed?t.height?Math.ceil(t.height/d):Math.ceil(t.maxHeight/d):t.height?Math.ceil(t.height/t.minItemHeight):Math.ceil(t.maxHeight/t.minItemHeight),e}(),h=2*t.buffer||1,m+h>=r)return void W();const e=m+h;c=0,g=e-1,p.value=0,t.fixed?v.value=(r-e)*d:v.value=(r-e)*t.minItemHeight,s.value=l.slice(c,g+1),b=0,t.fixed||(0,a.Y3)((()=>{x=function(){const e=_.value.children,a=[];for(let t=0;t<e.length;t++)a.push(e[t].getBoundingClientRect().height);for(let e=a.length;e<l.length;e++)a.push(t.minItemHeight);return a}()}))}function I(e){t.showOverflowTooltip&&(y.value=null),r<=2||!t.height&&!t.maxHeight||s.value.length>=r||!t.fixed&&!t.minItemHeight||H||(H=!0,requestAnimationFrame((()=>{H=!1})),function(e){let i=0;if(t.fixed)i=Math.floor(e/d);else{let t=0;for(let l=0;l<x.length;l++){if(t+=x[l],e===t){i=l+1;break}if(e<t){i=l;break}}}if(e>b){if(b=e,g+1-i-m>t.buffer)return}else{if(!(e<b))return;if(b=e,i-c>t.buffer)return}c=h%2?i-Math.floor(h/2):i-h/2;const u=r-s.value.length;c<0?c=0:c>u&&(c=u),g=c+s.value.length-1;const n=r-1;if(g>n&&(g=n),s.value=l.slice(c,g+1),t.fixed)p.value=c*d,v.value=(r-g-1)*d;else{let e=0;for(let t=0;t<c;t++)e+=x[t];p.value=e;let t=0;for(let e=g+1;e<r;e++)t+=x[e];v.value=t,(0,a.Y3)((()=>{const e=_.value.children,t=[];for(let l=0;l<e.length;l++)t.push(e[l].getBoundingClientRect().height);x.splice(c,t.length,...t)}))}}(e.target.scrollTop))}function V(e){if(t.showOverflowTooltip&&e.target!==e.currentTarget&&(!y.value||!y.value.contains(e.fromElement)&&y.value.contains(e.target))&&(y.value=e.target,e.target.parentElement!==e.currentTarget)){const t=e.currentTarget.children;for(let l=0;l<t.length;l++)if(t[l].contains(e.target)){y.value=t[l];break}}}function T(e){t.showOverflowTooltip&&(!y.value||y.value.contains(e.target)&&!y.value.contains(e.toElement))&&(y.value=null)}return function(){if(r<=2||!t.height&&!t.maxHeight||!t.fixed&&!t.minItemHeight)return void W();if(t.fixed)return s.value=l.slice(0,1),void(0,a.Y3)((()=>{const e=_.value.children;d=e[0].clientHeight,M()}));M()}(),(0,a.YP)((()=>t.data),(()=>{w.value&&(w.value.scrollTop=0),l=k(),r=l.length,r<=2||!t.height&&!t.maxHeight||!t.fixed&&!t.minItemHeight?W():M()})),(0,a.YP)([()=>t.height,()=>t.maxHeight],(()=>{r<=2||!t.height&&!t.maxHeight||!t.fixed&&!t.minItemHeight?W():(f.value=t.height?null:t.maxHeight,M())})),(l,u)=>((0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",{ref_key:"listWrapRef",ref:w,class:"list-wrap",style:(0,i.j5)({height:e.height?e.height+"px":"","max-height":f.value?f.value+"px":""}),onScroll:I},[(0,a._)("ul",{ref_key:"listRef",ref:_,style:(0,i.j5)({"padding-top":p.value+"px","padding-bottom":v.value+"px"}),onMouseover:V,onMouseout:T},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.value,(u=>((0,a.wg)(),(0,a.iD)("li",{key:u.id,class:(0,i.C_)(["list-item",{tooltip:t.showOverflowTooltip}]),style:(0,i.j5)({"white-space":e.fixed?"nowrap":"normal","word-break":e.fixed?"normal":"break-all",overflow:e.fixed?"hidden":"visible"})},[(0,a.WI)(l.$slots,"default",{items:u.data},(()=>[(0,a.Uk)((0,i.zw)(u),1)]))],6)))),128))],36)],36),t.showOverflowTooltip?((0,a.wg)(),(0,a.j4)(n.Z,{key:0,"mouseenter-el":y.value,enterable:!1,"teleport-to-body":!1},null,8,["mouseenter-el"])):(0,a.kq)("v-if",!0)]))}};var f=l(8972);const d=(0,f.Z)(r,[["__scopeId","data-v-654d82ea"]]),m={class:"wrap"},h={__name:"fixed-virtual-list",setup(e){const t=(0,u.qj)({total:1e3,buffer:0}),l=(0,u.iH)([]),n=(0,u.iH)(0);function o(){l.value=[];for(let e=1;e<=t.total;e++)l.value.push({msg:`${e} --- ${r()}`});n.value=t.buffer}function r(){const e=Math.ceil(10*Math.random());return["abcdefg","hijklmn","opq","rst","uvw","xyz","1","2","3","4"].slice(0,e).join("")}function f(e){""!==t[e]&&"string"==typeof t[e]&&(t[e]=t[e].replace(/[^0-9]/g,"").replace(/^0+(?=\d)/,""),t[e]=Number(t[e]))}return o(),(e,u)=>{const r=(0,a.up)("el-input"),h=(0,a.up)("el-form-item"),s=(0,a.up)("el-button"),c=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(c,{inline:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{label:"列表总数"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:t.total,"onUpdate:modelValue":u[0]||(u[0]=e=>t.total=e),modelModifiers:{number:!0},placeholder:"请输入列表总数",maxlength:"6",onBlur:u[1]||(u[1]=e=>f("total"))},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"缓冲量"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:t.buffer,"onUpdate:modelValue":u[2]||(u[2]=e=>t.buffer=e),modelModifiers:{number:!0},placeholder:"请输入滚动时的缓冲量",maxlength:"5",onBlur:u[3]||(u[3]=e=>f("buffer"))},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,{type:"primary",onClick:o},{default:(0,a.w5)((()=>[(0,a.Uk)("更新列表")])),_:1})])),_:1})])),_:1}),(0,a._)("div",m,[(0,a.Wm)(d,{data:l.value,"max-height":500,buffer:n.value,"show-overflow-tooltip":""},{default:(0,a.w5)((({items:e})=>[(0,a.Uk)((0,i.zw)(e.msg)+"345555555555555555555555555555555555555555555555555555 ",1)])),_:1},8,["data","buffer"])])])}}},s=(0,f.Z)(h,[["__scopeId","data-v-d680e7d4"]]),c={class:"wrap"},g={__name:"dynamic-virtual-list",setup(e){const t=(0,u.qj)({total:1e3,buffer:0}),l=(0,u.iH)([]),n=(0,u.iH)(0);function o(){l.value=[];let e=0;for(let a=1;a<=t.total;a++)e=Math.ceil(200*Math.random()),e=e<30?30:e,l.value.push({msg:`${a} --- ${r()}`});n.value=t.buffer}function r(){const e=Math.ceil(10*Math.random());return["道可道也，非恒道也。","名可名也，非恒名也。","无名万物之始也，有名万物之母也。","故：恒无欲也，以观其眇；","恒有欲也，以观其徼。","两者同出，异名同谓。玄之又玄，众妙之门。","天下皆知美之为美，恶矣，皆知善之为善，斯不善矣。","有无之相生也，难易之相成也，长短之相形也，高下之相盈也，音声之相和也，先后之相随也。","是以圣人居无为之事，行不言之教。","万物作而弗始也，为而弗恃也，成功而弗居也，夫唯弗居，是以弗去。"].slice(0,e).join("")}function f(e){"string"==typeof t[e]&&(t[e]=t[e].replace(/[^0-9]/g,"").replace(/^0+(?=\d)/,""),t[e]=Number(t[e]))}return o(),(e,u)=>{const r=(0,a.up)("el-input"),m=(0,a.up)("el-form-item"),h=(0,a.up)("el-button"),s=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(s,{inline:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{label:"列表总数"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:t.total,"onUpdate:modelValue":u[0]||(u[0]=e=>t.total=e),modelModifiers:{number:!0},placeholder:"请输入列表总数",maxlength:"6",onBlur:u[1]||(u[1]=e=>f("total"))},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,{label:"缓冲量"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:t.buffer,"onUpdate:modelValue":u[2]||(u[2]=e=>t.buffer=e),placeholder:"请输入滚动时的缓冲量",maxlength:"5",onBlur:u[3]||(u[3]=e=>f("buffer"))},null,8,["modelValue"])])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{type:"primary",onClick:o},{default:(0,a.w5)((()=>[(0,a.Uk)("更新列表")])),_:1})])),_:1})])),_:1}),(0,a._)("div",c,[(0,a.Wm)(d,{data:l.value,"max-height":500,buffer:n.value,fixed:!1},{default:(0,a.w5)((({items:e})=>[(0,a.Uk)((0,i.zw)(e.msg),1)])),_:1},8,["data","buffer"])])])}}},p=(0,f.Z)(g,[["__scopeId","data-v-b43d7868"]]),v=(e=>((0,a.dD)("data-v-4ca33970"),e=e(),(0,a.Cn)(),e))((()=>(0,a._)("div",{class:"title"},"虚拟列表",-1))),b={__name:"index",setup:e=>(e,t)=>{const l=(0,a.up)("el-tab-pane"),i=(0,a.up)("el-tabs");return(0,a.wg)(),(0,a.iD)(a.HY,null,[v,(0,a.Wm)(i,{"model-value":"1"},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{label:"定高",name:"1"},{default:(0,a.w5)((()=>[(0,a.Wm)(s)])),_:1}),(0,a.Wm)(l,{label:"非定高",name:"2",lazy:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p)])),_:1})])),_:1})],64)}},w=(0,f.Z)(b,[["__scopeId","data-v-4ca33970"]])}}]);
//# sourceMappingURL=696-6fe0abbe.js.map